<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin - Add Event</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link rel="icon" href="{{ url_for('static', filename='images/favicon.ico') }}" type="image/x-icon">
<style>
body { background:#f8f9fa; font-family:Arial,sans-serif; margin:0; padding:0; }
.sidebar { 
  height: 100vh; 
  background: #4b4f53; 
  color:white; 
  position: fixed; 
  width:220px; 
  padding-top:20px; 
  left:-220px; 
  transition:left 0.3s ease; 
  z-index:1001; 
  overflow-y:auto;
}
.sidebar.show { left:0; }
.sidebar a { color:white; display:block; padding:10px 20px; text-decoration:none; border-radius:8px; margin:5px 10px; transition:all 0.3s ease; }
.sidebar a:hover { background:#495057; transform: translateX(5px); }
.sidebar a.active { background:#6c757d; font-weight:bold; border-left:4px solid #ffc107; }
.sidebar-logo { max-width:120px; border-radius:50%; padding:5px; background:#343a40; box-shadow:0 4px 8px rgba(0,0,0,0.2); }
.main-content { margin-left:0; padding:20px; padding-bottom:80px; transition:margin-left 0.3s ease; }
.table-container { background:white; padding:20px; border-radius:12px; box-shadow:0 2px 8px rgba(0,0,0,0.1); }
.btn-add { background:#198754; color:white; border:none; }
.btn-add:hover { background:#157347; color:white; }
.time-card { display:inline-block; padding:6px 12px; font-size:0.7rem; font-weight:bold; color:#fff; background:#616d79; border-radius:8px; box-shadow:0 2px 6px rgba(202,190,190,0.2); }
.profile-icon { width:40px; height:40px; border-radius:50%; cursor:pointer; transition:transform 0.3s ease; border:2px solid #fff; }
.profile-icon:hover { transform: scale(1.1); }
/* Hamburger */
.hamburger { position: fixed; top:10px; left:10px; z-index:1002; background:#4b4f53; color:white; border:none; padding:10px; border-radius:5px; cursor:pointer; display:none; }
.overlay { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:1000; display:none; }
.overlay.show { display:block; }
/* Mobile Fixes */
@media(max-width:768px){
  .sidebar { width:100%; height:100vh; left:-100%; }
  .sidebar.show { left:0; }
  .main-content { margin-left:0; }
  .table-container { padding:15px; }
  .time-card { font-size:0.6rem; padding:4px 8px; }
  .hamburger { display:block; }
}
@media(min-width:769px){
  .sidebar { left:0; }
  .main-content { margin-left:220px; }
  .hamburger { display:none; }
}
</style>
</head>
<body>

<!-- Hamburger -->
<button class="hamburger" id="hamburgerBtn"><i class="fa-solid fa-bars"></i></button>
<div class="overlay" id="overlay"></div>

<div class="sidebar" id="sidebar">
  <div class="text-center">
    <img src="{{ url_for('static', filename='images/cross-background.jpg') }}" class="sidebar-logo" alt="Church Logo">
  </div>
  <hr>
  <a href="{{ url_for('admin_dashboard') }}"><i class="fa-solid fa-house"></i> Dashboard</a>
  
  <!-- Members Dropdown -->
  <a class="collapsed" data-bs-toggle="collapse" href="#membersDropdown" role="button" aria-expanded="false">
    <i class="fa-solid fa-users"></i> Members <i class="fa-solid fa-chevron-down float-end"></i>
  </a>
  <div class="collapse" id="membersDropdown">
    <a href="{{ url_for('view_members') }}" class="ps-4 d-block"><i class="fa-solid fa-table me-2"></i> View Members</a>
  </div>
  
  <!-- Ministries Dropdown -->
  <a class="collapsed" data-bs-toggle="collapse" href="#ministriesDropdown" role="button" aria-expanded="false">
    <i class="fa-solid fa-church"></i> Ministries <i class="fa-solid fa-chevron-down float-end"></i>
  </a>
  <div class="collapse" id="ministriesDropdown">
    <a href="{{ url_for('admin_ministries') }}" class="ps-4 d-block"><i class="fa-solid fa-list me-2"></i> View Ministries</a>
  </div>

  <!-- Events Dropdown -->
  <a class="collapsed" data-bs-toggle="collapse" href="#eventsDropdown" role="button" aria-expanded="true">
    <i class="fa-solid fa-calendar-days"></i> Events <i class="fa-solid fa-chevron-down float-end"></i>
  </a>
  <div class="collapse show" id="eventsDropdown">
    <a href="{{ url_for('view_events') }}" class="ps-4 d-block"><i class="fa-solid fa-list me-2"></i> View Events</a>
  </div>
</div>

<div class="main-content">
  <div id="datetime" class="time-card mb-2"></div>
  <div class="table-container mt-3">
    <h5 class="mb-3"><i class="fa-solid fa-calendar-days me-2"></i> Upcoming Events</h5>
    <!-- Example: list of events for user -->
    <ul class="list-group">
      {% for event in events %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
          {{ event.name }} - {{ event.date }} {{ event.time }}
          <span>{{ event.location }}</span>
        </li>
      {% else %}
        <li class="list-group-item">No events scheduled.</li>
      {% endfor %}
    </ul>
  </div>
</div>

<div class="dropdown position-fixed top-0 end-0 p-2">
  <img src="{{ url_for('uploaded_file', filename=user_profile_pic) if user_profile_pic else url_for('static', filename='images/default-profile.png') }}" class="profile-icon dropdown-toggle" data-bs-toggle="dropdown" alt="User Profile">
  <ul class="dropdown-menu dropdown-menu-end">
    <li><a class="dropdown-item" href="{{ url_for('update_profile') }}"><i class="fa-solid fa-user me-2"></i> Update Profile</a></li>
    <li><a class="dropdown-item" href="{{ url_for('logout') }}"><i class="fa-solid fa-right-from-bracket me-2"></i> Logout</a></li>
  </ul>
</div>

<script>
function updateDateTime(){
  const now=new Date();
  const options={month:'numeric', day:'numeric', year:'numeric', hour:'2-digit', minute:'2-digit', second:'2-digit'};
  document.getElementById('datetime').innerText=now.toLocaleDateString('en-US', options);
}
setInterval(updateDateTime, 1000);
updateDateTime();

// Hamburger toggle
document.getElementById('hamburgerBtn').onclick = () => {
  document.getElementById('sidebar').classList.toggle('show');
  document.getElementById('overlay').classList.toggle('show');
};
document.getElementById('overlay').onclick = () => {
  document.getElementById('sidebar').classList.remove('show');
  document.getElementById('overlay').classList.remove('show');
};
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
